
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Deep sleep mode will reduce the power consumption and your batteries will last longer. Having the ESP board in deep sleep mode means cutting with the activities that consume more power while operating but leave just enough activity to wake up the processor when something interesting happens.">
      
      
      
      
      <link rel="icon" href="https://cdn.steminds.com/docs/images/icon.svg">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.6">
    
    
      
        <title>STEMinds - ESP32 Deep sleep functionality - STEMinds Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.2c0c5eaf.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../../stylesheets/style-starter.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-165700957-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="default" data-md-color-accent="amber">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#wakeup-from-deep-sleep" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Mitigate bug: https://github.com/mkdocs/mkdocs/issues/2191 -->



<!-- Application header -->
<header class="w3l-bootstrap-header" data-md-component="header">
    <nav class="navbar navbar-expand-lg navbar-dark py-lg-2 py-2">
      <div class="container">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <!-- Button to open drawer -->
          <label class="md-header-nav__button md-icon" for="__drawer">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
          </label>
        </button>

        <a class="navbar-brand" href="#index.html" style="color: #FFC51D;">
            <img src="https://cdn.steminds.com/docs/images/icon.svg" alt="STEMinds" title="STEMinds" style="height:48px;" />
            STEMinds
        </a>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item">
              <a class="nav-link" href="https://steminds.com/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://shop.steminds.com/">Products</a>
            </li>
              <li class="nav-item">
              <a class="nav-link" href="https://wiki.steminds.com/">Documentation</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://steminds.com/contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="STEMinds Documentation" class="md-nav__button md-logo" aria-label="STEMinds Documentation" data-md-component="logo">
      
  <img src="https://cdn.steminds.com/docs/images/icon.svg" alt="logo">

    </a>
    STEMinds Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Products
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Products" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Products
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../../products/eduponics_mini_extension_board/" class="md-nav__link">
        Extension board for Eduponics Mini
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Kits
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Kits" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Kits
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" checked>
      
      <label class="md-nav__link" for="__nav_3_1">
        Eduponics Mini
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Eduponics Mini" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Eduponics Mini
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../eduponics_mini_getting_started/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advance_tools/" class="md-nav__link">
        Advance manual tools
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../bme280_temperature_and_humidity/" class="md-nav__link">
        BME280 sensor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../dht11_temperature_and_humidity/" class="md-nav__link">
        DHT11 sensor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../light_sensor/" class="md-nav__link">
        BH1750 Light sensor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../water_quantity_sensor/" class="md-nav__link">
        Water level sensor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../pump/" class="md-nav__link">
        Water pump
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../rgb_led/" class="md-nav__link">
        RGB LED
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../eeprom_module/" class="md-nav__link">
        EEPROM Module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../rtc_module/" class="md-nav__link">
        RTC Module
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../soil_moisture_sensor/" class="md-nav__link">
        Soil moisture sensor
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Deep sleep wakeup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Deep sleep wakeup
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wakeup-sources" class="md-nav__link">
    Wakeup sources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#waking-up-by-button-press" class="md-nav__link">
    Waking up by button press
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advance_usage/RGB_indicators/" class="md-nav__link">
        RGB based indicators
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advance_usage/water_level_based_water_pumping/" class="md-nav__link">
        Water level based pump
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advance_usage/introduction_to_mqtt/" class="md-nav__link">
        Introduction to MQTT
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advance_usage/basic_mqtt_client/" class="md-nav__link">
        Basic MQTT client
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advance_usage/eduponics_mqtt_app/" class="md-nav__link">
        Eduponics MQTT APP
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wakeup-sources" class="md-nav__link">
    Wakeup sources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#waking-up-by-button-press" class="md-nav__link">
    Waking up by button press
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="wakeup-from-deep-sleep">Wakeup from Deep sleep</h1>
<p align="center">
  <img src="https://cdn.steminds.com/docs/kits/eduponics_mini/drained_battery_illustration.jpg" width="350px">
</p>

<p>Having the Eduponics Mini ESP32 board running on active mode with batteries it’s not ideal, since the power from batteries will drain very quickly.
<br/><br/>
If you put the board in deep sleep mode, it will reduce the power consumption and your batteries will last longer. Having the board in deep sleep mode means cutting with the activities that consume more power while operating but leave just enough activity to wake up the processor when something interesting happens.
<br/><br/>
When operating in deep sleep mode, the board have a current consumption on the μA range. With a custom and carefully designed board you can get a minimal consumption of about 5 μA.
<br/><br/>
This feature is very specific to the ESP32 other boards such as Arduino or Raspberry Pi don't have this deep sleep functionality thus not suitable for outdoor / battery powered applications.</p>
<h2 id="wakeup-sources">Wakeup sources</h2>
<p>There are multiple ways that ESP32 can wakeup from a deep sleep, such as:</p>
<ul>
<li>Timer - using ESP32 internal RTC to count and wakeup after x seconds</li>
<li>External wakeup - we'v dedicated a "wakeup" button on the Eduponics mini board for this purpose.</li>
<li>touch pins - waking up by connecting touch button to the board</li>
</ul>
<p>In our tutorial we'll focus on waking up by push of a button, this is useful if you want to check sensors data on the Eduponics mini board by pressing it from time to time let's say when you come home every day, this can be extremely beneficial for the battery life if you power the board with an external battery.</p>
<h2 id="waking-up-by-button-press">Waking up by button press</h2>
<p>We've integrated a special button on the top right side of the Eduponics mini board, it's just a simple button that is connected to IO PIN number 36, technically this button can be used for anything but we've decided to dedicate it for a special use which is waking up from deep sleep.
<br/><br/>
Before we go into deep sleep <b>we must</b> set a wake up input, failing to do so will cause our board to go into infinite loop where it wakes up and goes back to sleep.
<br/><br/>
We can do it by the function called .wake_on_ext0() supply the wakeup pin which is IO PIN 36 which we configured as input and wakeup any high means any type of button touch (LOW OR HIGH) the board will wakeup.
<br/><br/>
After configuring the button, it's safe to continue writing the software and when we ready to put the board to sleep we can use machine.deepsleep() to enter deep sleeping state, once the button is pressed the board will restart and initialize the program again.</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">MicroPython</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">esp32</span>
<span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="n">wake_up</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>

<span class="c1">#level parameter can be: esp32.WAKEUP_ANY_HIGH or esp32.WAKEUP_ALL_LOW</span>
<span class="n">esp32</span><span class="o">.</span><span class="n">wake_on_ext0</span><span class="p">(</span><span class="n">pin</span> <span class="o">=</span> <span class="n">wake_up</span><span class="p">,</span> <span class="n">level</span> <span class="o">=</span> <span class="n">esp32</span><span class="o">.</span><span class="n">WAKEUP_ANY_HIGH</span><span class="p">)</span>

<span class="c1">#your main code goes here to perform a task</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Im awake now. Going to sleep in 5 seconds ...&#39;</span><span class="p">)</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Going to sleep now ..&#39;</span><span class="p">)</span>
<span class="c1">#once the main code finished, we can set the program to enter deep-sleep</span>
<span class="n">machine</span><span class="o">.</span><span class="n">deepsleep</span><span class="p">()</span>
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">ESP32-Arduino</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">Deep Sleep with External Wake Up</span>
<span class="cm">=====================================</span>
<span class="cm">This code displays how to use deep sleep with</span>
<span class="cm">an external trigger as a wake up source and how</span>
<span class="cm">to store data in RTC memory to use it over reboots</span>

<span class="cm">This code is under Public Domain License.</span>

<span class="cm">Hardware Connections</span>
<span class="cm">======================</span>
<span class="cm">Push Button to GPIO 33 pulled down with a 10K Ohm</span>
<span class="cm">resistor</span>

<span class="cm">NOTE:</span>
<span class="cm">======</span>
<span class="cm">Only RTC IO can be used as a source for external wake</span>
<span class="cm">source. They are pins: 0,2,4,12-15,25-27,32-39.</span>

<span class="cm">Author:</span>
<span class="cm">Pranav Cherukupalli &lt;cherukupallip@gmail.com&gt;</span>
<span class="cm">*/</span>

<span class="cp">#define BUTTON_PIN_BITMASK 0x200000000 </span><span class="c1">// 2^33 in hex</span>

<span class="n">RTC_DATA_ATTR</span> <span class="kt">int</span> <span class="n">bootCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">Method to print the reason by which ESP32</span>
<span class="cm">has been awaken from sleep</span>
<span class="cm">*/</span>
<span class="kt">void</span> <span class="nf">print_wakeup_reason</span><span class="p">(){</span>
  <span class="n">esp_sleep_wakeup_cause_t</span> <span class="n">wakeup_reason</span><span class="p">;</span>

  <span class="n">wakeup_reason</span> <span class="o">=</span> <span class="n">esp_sleep_get_wakeup_cause</span><span class="p">();</span>

  <span class="k">switch</span><span class="p">(</span><span class="n">wakeup_reason</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">case</span> <span class="nl">ESP_SLEEP_WAKEUP_EXT0</span> <span class="p">:</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Wakeup caused by external signal using RTC_IO&quot;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">ESP_SLEEP_WAKEUP_EXT1</span> <span class="p">:</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Wakeup caused by external signal using RTC_CNTL&quot;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">ESP_SLEEP_WAKEUP_TIMER</span> <span class="p">:</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Wakeup caused by timer&quot;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">ESP_SLEEP_WAKEUP_TOUCHPAD</span> <span class="p">:</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Wakeup caused by touchpad&quot;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">ESP_SLEEP_WAKEUP_ULP</span> <span class="p">:</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Wakeup caused by ULP program&quot;</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">default</span> <span class="o">:</span> <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Wakeup was not caused by deep sleep: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">wakeup_reason</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">(){</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span> <span class="c1">//Take some time to open up the Serial Monitor</span>

  <span class="c1">//Increment boot number and print it every reboot</span>
  <span class="o">++</span><span class="n">bootCount</span><span class="p">;</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Boot number: &quot;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">bootCount</span><span class="p">));</span>

  <span class="c1">//Print the wakeup reason for ESP32</span>
  <span class="n">print_wakeup_reason</span><span class="p">();</span>

  <span class="cm">/*</span>
<span class="cm">  First we configure the wake up source</span>
<span class="cm">  We set our ESP32 to wake up for an external trigger.</span>
<span class="cm">  There are two types for ESP32, ext0 and ext1 .</span>
<span class="cm">  ext0 uses RTC_IO to wakeup thus requires RTC peripherals</span>
<span class="cm">  to be on while ext1 uses RTC Controller so doesnt need</span>
<span class="cm">  peripherals to be powered on.</span>
<span class="cm">  Note that using internal pullups/pulldowns also requires</span>
<span class="cm">  RTC peripherals to be turned on.</span>
<span class="cm">  */</span>
  <span class="n">esp_sleep_enable_ext0_wakeup</span><span class="p">(</span><span class="n">GPIO_NUM_36</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span> <span class="c1">//1 = High, 0 = Low</span>

  <span class="c1">//If you were to use ext1, you would use it like</span>
  <span class="c1">//esp_sleep_enable_ext1_wakeup(BUTTON_PIN_BITMASK,ESP_EXT1_WAKEUP_ANY_HIGH);</span>

  <span class="c1">//Go to sleep now</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Going to sleep now&quot;</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
  <span class="n">esp_deep_sleep_start</span><span class="p">();</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;This will never be printed&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">(){</span>
  <span class="c1">//This is not going to be called</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Must set button input or any wake up input before going to deep sleep</p>
<p>Failing to do so will cause infinite loop where when the board wakes up it goes back to sleep right away, it won't be possible to re-program it unless we'll clean the memory and write the firmware again.</p>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->


<footer class="md-footer">
  
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.a1c7c35e.min.js"></script>
      
        <script src="../../../../javascripts/extra.js"></script>
      
    
  </body>
</html>